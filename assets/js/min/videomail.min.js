var VideomailFieldController=Marionette.Object.extend({initialize:function(){this.listenTo(Backbone.Radio.channel("videomail"),"init:model",this.register),Backbone.Radio.channel("videomail").reply("get:submitData",this.getSubmitData),Backbone.Radio.channel("videomail").reply("validate:required",this.validateRequired)},register:function(e){var i=this,t="form-"+e.get("formID"),o=require("videomail-client"),n=new o({siteName:e.get("site_name"),video:{limitSeconds:e.get("limit_seconds")||80,width:e.get("width")||320,countdown:e.get("countdown")||!1},selectors:{submitButtonId:i.getSubmitButtonId(t)},verbose:e.get("verbose")||!1});n.on(n.events.COUNTDOWN,function(){i.disableSubmit(t)}),n.on(n.events.RECORDING,function(){i.disableSubmit(t)}),n.on(n.events.SUBMITTED,function(o){e.set("value",o.url),e.set("videomail-url",o.url),e.set("videomail-webm",o.webm),e.set("videomail-mp4",o.mp4),e.set("videomail-poster",o.poster),e.set("videomail-alias",o.alias),e.set("videomail-key",o.key),i.enableSubmit(t)}),n.show()},getSubmitButtonId:function(e){var i=document.getElementById(e);return i.querySelector("[type='submit']").getAttribute("id")},enableSubmit:function(e){Backbone.Radio.channel(e).trigger("enable:submit")},disableSubmit:function(e){Backbone.Radio.channel(e).trigger("disable:submit")},validateRequired:function(){return!0},getSubmitData:function(e,i){return e.value=i.get("videomail-url"),e.url=i.get("videomail-url"),e.webm=i.get("videomail-webm"),e.mp4=i.get("videomail-mp4"),e.poster=i.get("videomail-poster"),e.alias=i.get("videomail-alias"),e.key=i.get("videomail-key"),e}});jQuery(document).ready(function(){new VideomailFieldController});