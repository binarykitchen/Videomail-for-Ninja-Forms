var VideomailFieldController=Marionette.Object.extend({initialize:function(){this.listenTo(Backbone.Radio.channel("videomail"),"init:model",this.register),Backbone.Radio.channel("videomail").reply("get:submitData",this.getSubmitData),Backbone.Radio.channel("videomail").reply("validate:required",this.validateRequired)},register:function(e){var i=require("videomail-client"),t=new i({siteName:e.get("site_name"),video:{limitSeconds:e.get("limit_seconds")||80,width:e.get("width")||320,countdown:e.get("countdown")||!1},verbose:e.get("verbose")||!1}),a=e.get("formID"),o=this;t.on(t.events.COUNTDOWN,function(){o.disableSubmit(a)}),t.on(t.events.RECORDING,function(){o.disableSubmit(a)}),t.on(t.events.SUBMITTED,function(i){e.set("value",i.url),e.set("videomail-url",i.url),e.set("videomail-webm",i.webm),e.set("videomail-mp4",i.mp4),e.set("videomail-poster",i.poster),e.set("videomail-alias",i.alias),e.set("videomail-key",i.key),o.enableSubmit(a)}),t.show()},enableSubmit:function(e){Backbone.Radio.channel("form-"+e).trigger("enable:submit")},disableSubmit:function(e){Backbone.Radio.channel("form-"+e).trigger("disable:submit")},validateRequired:function(){return!0},getSubmitData:function(e,i){return e.value=i.get("videomail-url"),e.url=i.get("videomail-url"),e.webm=i.get("videomail-webm"),e.mp4=i.get("videomail-mp4"),e.poster=i.get("videomail-poster"),e.alias=i.get("videomail-alias"),e.key=i.get("videomail-key"),e}});jQuery(document).ready(function(){new VideomailFieldController});